<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>.QR</title>

    <!-- เชื่อม Tailwindcss -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <!-- ฟอนต์ kanit -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

    <!-- ใส่ฟอนต์ทั้งหมด -->
    <style>
        body { font-family: "kanit" }
    </style>


</head>
<body class="bg-gray-50 min-h-screen">

    <!-- Navbar ทั้งหมด -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-18">

                <div class="flex items-center space-x-5">
                    <img src="Picture/Logo.png" class="flex w-18 h-18 ">
                    </img>
                    <span class="text-gray-700 font-medium">QR Code Generator</span>
                </div>

            </div>
        </div>
    </nav>

    <!-- ส่วนหลักทั้งหมด ดูดีๆก่อนแก้ไข -->
    <div class="max-w-md mx-auto px-4 py-8">
        
        <!-- ตรงใส่ลิ้ง -->
        <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-6 transition-all duration-300 hover:shadow-md">
            <h2 class="text-gray-800 text-2xl font-medium mb-1">Enter your link here</h2>
            <h2 class="text-gray-800 text-xl font-medium mb-4">ใส่ลิ้งของคุณ</h2>
            <div class="space-y-4">
                <input 
                    type="url" 
                    id="linkInput" 
                    placeholder="วางลิงของคุณตรงนี้" 
                    class="w-full px-4 py-3 bg-gray-100 border-1 border-gray-300 rounded-xl text-gray-700 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all duration-200"
                    required
                >
                <button 
                    onclick="generateQRCode()" 
                    class="w-full bg-slate-700 hover:bg-slate-800 text-white font-medium py-3 rounded-xl transition-all duration-200 transform hover:scale-[0.95] active:scale-95"
                >
                    สร้างลิ้งของคุณ
                </button>
            </div>
        </div>

        <!-- ตรงแสดงผล qr code -->
        <div id="qr-code-container" class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-6 transition-all duration-300 hover:shadow-md hidden">
            <h2 class="text-gray-800 text-2xl font-medium mb-1">Your Qr Code</h2>
            <h2 class="text-gray-800 font-medium mb-4">Qr Code ของคุณ</h2>
            <div class="flex justify-center mb-4">
                <div class="bg-gray-100 p-4 rounded-xl">
                    <img id="qrCodeImage" src="" alt="QR Code" class="w-48 h-48 object-contain">
                </div>
            </div>
            <button 
                id="downloadLink" 
                onclick="downloadQRCode()"
                class="w-full bg-slate-700 hover:bg-slate-800 text-white font-medium py-3 rounded-xl transition-all duration-200 transform hover:scale-[0.95] active:scale-95"
            >
                ดาวน์โหลด Qr Code
            </button>
        </div>

    </div>

    <script>
        let currentQRCodeUrl = '';

        function generateQRCode() {
            const link = document.getElementById('linkInput').value.trim();
            const qrCodeImage = document.getElementById('qrCodeImage');
            const qrCodeContainer = document.getElementById('qr-code-container');

            if (link) {
                // Validate URL
                try {
                    new URL(link);
                } catch {
                    // If not a valid URL, assume it's missing protocol
                    const correctedLink = link.startsWith('http') ? link : 'https://' + link;
                    try {
                        new URL(correctedLink);
                        document.getElementById('linkInput').value = correctedLink;
                    } catch {
                        alert('กรุณาป้อนลิงก์ที่ถูกต้อง');
                        return;
                    }
                }

                // Generate QR Code
                const finalLink = document.getElementById('linkInput').value;
                const apiUrl = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(finalLink)}`;
                
                currentQRCodeUrl = apiUrl;
                qrCodeImage.src = apiUrl;
                
                // Show QR code container with animation
                qrCodeContainer.classList.remove('hidden');
                qrCodeContainer.style.opacity = '0';
                qrCodeContainer.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    qrCodeContainer.style.transition = 'all 0.3s ease';
                    qrCodeContainer.style.opacity = '1';
                    qrCodeContainer.style.transform = 'translateY(0)';
                }, 10);
                
            } else {
                alert('กรุณาป้อนลิงก์ก่อนสร้าง QR Code');
                qrCodeContainer.classList.add('hidden');
            }
        }

        function downloadQRCode() {
            if (currentQRCodeUrl) {
                const link = document.createElement('a');
                link.href = currentQRCodeUrl;
                link.download = 'qrcode.png';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }

        // Enter key support
        document.getElementById('linkInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                generateQRCode();
            }
        });

        // Auto-focus on input
        window.addEventListener('load', function() {
            document.getElementById('linkInput').focus();
        });
    </script>
</body>
</html>